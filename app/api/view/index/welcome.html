<!DOCTYPE html>
<html class="x-admin-sm">
<head>
    {include file="public/_meta" /}
</head>
<body>
<div class="layui-fluid">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-sm6 layui-col-md3">
            <div class="layui-card" id="playground">

            </div>
        </div>
        <style id="welcome_style"></style>
    </div>
</div>
<script>
    $(document).ready(function() {
        base();
        $("#join").click(function() {
            console.log("我是join");
        });
    });
    function base(){
        $.ajax({
            type : "POST",
            contentType : "application/x-www-form-urlencoded",
            url : '/api/User/userInfo',
            success : function(res) {
                console.log(res);
                if (res.status === config('failed')){
                    layer.msg(res.message);
                }
                let cla = res.result['class'], department = res.result['department'], join_class = null;
                if (empty(cla)){
                    cla = "暂未加入班级";
                    department = "暂无学部";
                    join_class = "<p class=\"layuiadmin-big-font\" id='join'><span class=\"layui-badge layui-bg-red layuiadmin-badge\">点我加入班级</span></p>";
                }
                $("#playground").append(
                    "<div class=\"layui-card-header\">学号：" + res.result['student_id'] +
                        "<span class=\"layui-badge layui-bg-cyan layuiadmin-badge\">  " + res.result['name'] + "</span>" +
                    "</div>" +
                    "<div class=\"layui-card-body\">" +
                        join_class +
                        "<p>" +
                            "所在班级：" + cla + "<br>所在学部：" + department +
                        "</p>" +
                    "</div>"
                );
            }
        });
    }
</script>
</body>
</html>